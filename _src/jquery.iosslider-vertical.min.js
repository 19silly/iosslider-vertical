/*
 * iosSlider-vertical - http://iosscripts.com/iosslider-vertical/
 * 
 * A jQuery Vertical Slider for iPhone/iPad Safari 
 * This plugin turns any tall element into a touch enabled vertical slider.
 * 
 * Copyright (c) 2012 Marc Whitbread
 * 
 * Version: v0.1.6 (beta) (01/22/2013)
 * Minimum requirements: jQuery v1.4+
 *
 * Advanced requirements:
 * 1) jQuery bind() click event override on slide requires jQuery v1.6+
 *
 * Terms of use:
 *
 * 1) iosSlider is licensed under the Creative Commons â€“ Attribution-NonCommercial 3.0 License.
 * 2) You may use iosSlider free for personal or non-profit purposes, without restriction.
 *	  Attribution is not required but always appreciated. For commercial projects, you
 *	  must purchase a license. You may download and play with the script before deciding to
 *	  fully implement it in your project. Making sure you are satisfied, and knowing iosSlider
 *	  is the right script for your project is paramount.
 * 3) You are not permitted to make the resources found on iosscripts.com available for
 *    distribution elsewhere "as is" without prior consent. If you would like to feature
 *    iosSlider on your site, please do not link directly to the resource zip files. Please
 *    link to the appropriate page on iosscripts.com where users can find the download.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 * COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 * GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 */
 
(function(a){var ma=0,W=0,ba=0,S=0,M="ontouchstart"in window,Ca="onorientationchange"in window,ca=!1,Z=!1,$=!1,na=!1,ga="pointer",ta="pointer",oa=[],ha=[],P=[],ua=[],ia=[],G=[],aa=[],x=[],e=[],n=[],va=[],da=[],d={showScrollbar:function(f,d){f.scrollbarHide&&a("."+d).css({opacity:f.scrollbarOpacity,filter:"alpha(opacity:"+100*f.scrollbarOpacity+")"})},hideScrollbar:function(a,g,b,A,c,t,e,n,B,v){if(a.scrollbar&&a.scrollbarHide)for(var x=b;x<b+25;x++)g[g.length]=d.hideScrollbarIntervalTimer(10*x,A[b], (b+24-x)/24,c,t,e,n,B,v,a)},hideScrollbarInterval:function(f,g,b,A,c,t,e,x,B){S=-1*f/n[x]*(c-t-e-A);d.setSliderOffset("."+b,S);a("."+b).css({opacity:B.scrollbarOpacity*g,filter:"alpha(opacity:"+100*B.scrollbarOpacity*g+")"})},slowScrollHorizontalInterval:function(f,g,b,A,c,t,Q,J,B,v,K,u,q,s,j,C,m,k){if(k.infiniteSlider){if(b<=-1*n[j]){var p=a(f).width();if(b<=-1*va[j]){var r=-1*K[0];a(g).each(function(b){d.setSliderOffset(a(g)[b],r+C);b<u.length&&(u[b]=-1*r);r+=a(this).outerWidth(!0)});b+=-1*u[0]; e[j]=-1*u[0]+C;n[j]=e[j]+p-t;x[j]=0}else{var l=0,E=d.getSliderOffset(a(g[0]),"y");a(g).each(function(a){d.getSliderOffset(this,"y")<E&&(E=d.getSliderOffset(this,"y"),l=a)});q=e[j]+p;d.setSliderOffset(a(g)[l],q);e[j]=-1*u[1]+C;n[j]=e[j]+p-t;u.splice(0,1);u.splice(u.length,0,-1*q+C);x[j]++}}if(b>=-1*e[j]||0<=b){p=a(f).width();if(0<=b){r=-1*K[0];a(g).each(function(b){d.setSliderOffset(a(g)[b],r+C);b<u.length&&(u[b]=-1*r);r+=a(this).outerWidth(!0)});b-=-1*u[0];e[j]=-1*u[0]+C;n[j]=e[j]+p-t;for(x[j]=s;0< -1*u[0]-p+C;){var y=0,H=d.getSliderOffset(a(g[0]),"y");a(g).each(function(a){d.getSliderOffset(this,"y")>H&&(H=d.getSliderOffset(this,"y"),y=a)});q=e[j]-a(g[y]).outerWidth(!0);d.setSliderOffset(a(g)[y],q);u.splice(0,0,-1*q+C);u.splice(u.length-1,1);e[j]=-1*u[0]+C;n[j]=e[j]+p-t;x[j]--;G[j]++}}0>b&&(y=0,H=d.getSliderOffset(a(g[0]),"y"),a(g).each(function(a){d.getSliderOffset(this,"y")>H&&(H=d.getSliderOffset(this,"y"),y=a)}),q=e[j]-a(g[y]).outerWidth(!0),d.setSliderOffset(a(g)[y],q),u.splice(0,0,-1* q+C),u.splice(u.length-1,1),e[j]=-1*u[0]+C,n[j]=e[j]+p-t,x[j]--)}}K=!1;t=d.calcActiveOffset(k,b,u,t,x[j],s,v,j);q=(t+x[j]+s)%s;k.infiniteSlider?q!=aa[j]&&(K=!0):t!=G[j]&&(K=!0);if(K&&(s=new d.args(k,f,a(f).children(":eq("+q+")"),q,m,!0),a(f).parent().data("args",s),""!=k.onSlideChange))k.onSlideChange(s);G[j]=t;aa[j]=q;b=Math.floor(b);d.setSliderOffset(f,b);k.scrollbar&&(S=Math.floor((-1*b-e[j]+C)/(n[j]-e[j]+C)*(Q-J-c)),f=c-B,b>=-1*e[j]+C?(f=c-B- -1*S,d.setSliderOffset(a("."+A),0)):(b<=-1*n[j]+1&& (f=Q-J-B-S),d.setSliderOffset(a("."+A),S)),a("."+A).css({height:f+"px"}))},slowScrollHorizontal:function(f,g,b,A,c,t,Q,J,B,v,K,u,q,s,j,C,m,k,p,r){t=[];var l=d.getSliderOffset(f,"y"),E=0,y=25/1024*J;frictionCoefficient=r.frictionCoefficient;elasticFrictionCoefficient=r.elasticFrictionCoefficient;snapFrictionCoefficient=r.snapFrictionCoefficient;5<c&&r.snapToChildren&&!k?E=1:-5>c&&(r.snapToChildren&&!k)&&(E=-1);c<-1*y?c=-1*y:c>y&&(c=y);a(f)[0]!==a(m)[0]&&(E*=-1,c*=-2);m=x[s];if(r.infiniteSlider)var H= e[s],w=n[s];k=[];for(var y=[],h=0;h<q.length;h++)k[h]=q[h],h<g.length&&(y[h]=d.getSliderOffset(a(g[h]),"y"));for(;1<c||-1>c;){c*=frictionCoefficient;l+=c;if((l>-1*e[s]||l<-1*n[s])&&!r.infiniteSlider)c*=elasticFrictionCoefficient,l+=c;if(r.infiniteSlider){if(l<=-1*w){for(var w=a(f).width(),L=0,M=y[0],h=0;h<y.length;h++)y[h]<M&&(M=y[h],L=h);h=H+w;y[L]=h;H=-1*k[1]+p;w=H+w-J;k.splice(0,1);k.splice(k.length,0,-1*h+p);m++}if(l>=-1*H){w=a(f).width();L=0;M=y[0];for(h=0;h<y.length;h++)y[h]>M&&(M=y[h],L=h); h=H-a(g[L]).outerWidth(!0);y[L]=h;k.splice(0,0,-1*h+p);k.splice(k.length-1,1);H=-1*k[0]+p;w=H+w-J;m--}}t[t.length]=l}y=!1;c=d.calcActiveOffset(r,l,k,J,m,C,G[s],s);H=(c+m+C)%C;r.snapToChildren&&(r.infiniteSlider?H!=aa[s]&&(y=!0):c!=G[s]&&(y=!0),0>E&&!y?(c++,c>=q.length&&!r.infinteSlider&&(c=q.length-1)):0<E&&!y&&(c--,0>c&&!r.infinteSlider&&(c=0)));if(r.snapToChildren||(l>-1*e[s]||l<-1*n[s])&&!r.infiniteSlider){l=d.getSliderOffset(f,"y");for(t.splice(0,t.length);l<k[c]-0.5||l>k[c]+0.5;)l=(l-k[c])*snapFrictionCoefficient+ k[c],t[t.length]=l;t[t.length]=k[c]}E=1;0!=t.length%2&&(E=0);for(l=0;l<b.length;l++)clearTimeout(b[l]);m=(c+m+C)%C;H=0;for(l=E;l<t.length;l+=2)if(l==E||1<Math.abs(t[l]-H)||l>=t.length-2)H=t[l],b[b.length]=d.slowScrollHorizontalIntervalTimer(10*l,f,g,t[l],A,Q,J,B,v,K,c,u,q,j,C,s,p,m,r);H=(c+x[s]+C)%C;""!=r.onSlideComplete&&(b[b.length]=d.onSlideCompleteTimer(10*(l+1),r,f,a(f).children(":eq("+H+")"),H,s));ia[s]=b;d.hideScrollbar(r,b,l,t,A,Q,J,v,K,s)},onSlideComplete:function(f,g,b,A,c){var t=oa[c]!= A?!0:!1;b=new d.args(f,a(g),b,A,A,t);a(g).parent().data("args",b);if(""!=f.onSlideComplete)f.onSlideComplete(b);oa[c]=A},getSliderOffset:function(f,d){var b=0;d="x"==d?4:5;if(ca&&!Z&&!$){for(var b=["-webkit-transform","-moz-transform","transform"],A=0;A<b.length;A++)if(void 0!=a(f).css(b[A])&&0<a(f).css(b[A]).length){var c=a(f).css(b[A]).split(",");break}b=parseInt(c[d],10)}else b=parseInt(a(f).css("left"),10);return b},setSliderOffset:function(f,d){ca&&!Z&&!$?a(f).css({webkitTransform:"matrix(1,0,0,1,0,"+ d+")",MozTransform:"matrix(1,0,0,1,0,"+d+")",transform:"matrix(1,0,0,1,0,"+d+")"}):a(f).css({top:d+"px"})},setBrowserInfo:function(){null!=navigator.userAgent.match("WebKit")?(ga="-webkit-grab",ta="-webkit-grabbing"):null!=navigator.userAgent.match("Gecko")?(ga="move",ta="-moz-grabbing"):null!=navigator.userAgent.match("MSIE 7")?na=Z=!0:null!=navigator.userAgent.match("MSIE 8")?na=$=!0:null!=navigator.userAgent.match("MSIE 9")&&(na=!0)},has3DTransform:function(){var d=!1,g=a("<div />").css({webkitTransform:"matrix(1,1,1,1,1,1)", MozTransform:"matrix(1,1,1,1,1,1)",transform:"matrix(1,1,1,1,1,1)"});""==g.attr("style")?d=!1:void 0!=g.attr("style")&&(d=!0);return d},getSlideNumber:function(a,d,b){return(a-x[d]+b)%b},calcActiveOffset:function(a,d,b,A){var c=!1;a=[];for(var t,e=0;e<b.length;e++)b[e]<=d&&b[e]>d-A&&(!c&&b[e]!=d&&(a[a.length]=b[e-1]),a[a.length]=b[e],c=!0);0==a.length&&(a[0]=b[b.length-1]);for(e=c=0;e<a.length;e++){var n=Math.abs(d-a[e]);n<A&&(c=a[e],A=n)}for(e=0;e<b.length;e++)c==b[e]&&(t=e);return t},changeSlide:function(f, g,b,e,c,t,n,J,B,v,K,u,q,s,j,C,m){d.autoSlidePause(q);for(var k=0;k<e.length;k++)clearTimeout(e[k]);var p=Math.ceil(m.autoSlideTransTimer/10)+1,r=d.getSliderOffset(g,"y"),l=u[f],E=l-r;if(m.infiniteSlider){f=(f-x[q]+2*j)%j;k=!1;0==f&&2==j&&(f=j,u[f]=u[f-1]-a(b).eq(0).outerWidth(!0),k=!0);l=u[f];E=l-r;l=[u[f]-a(g).width(),u[f]+a(g).width()];k&&u.splice(u.length-1,1);for(k=0;k<l.length;k++)Math.abs(l[k]-r)<Math.abs(E)&&(E=l[k]-r)}var l=[],y;d.showScrollbar(m,c);for(k=0;k<=p;k++)y=k,y/=p,y--,y=r+E*(Math.pow(y, 5)+1),l[l.length]=y;for(k=r=0;k<l.length;k++){if(0==k||1<Math.abs(l[k]-r)||k>=l.length-2)r=l[k],e[k]=d.slowScrollHorizontalIntervalTimer(10*(k+1),g,b,l[k],c,t,n,J,B,v,f,K,u,s,j,q,C,f,m);0==k&&""!=m.onSlideStart&&(p=(G[q]+x[q]+j)%j,m.onSlideStart(new d.args(m,g,a(g).children(":eq("+p+")"),p,f,!1)))}r=!1;p=(f+x[q]+j)%j;m.infiniteSlider?p!=aa[q]&&(r=!0):f!=G[q]&&(r=!0);r&&""!=m.onSlideComplete&&(e[e.length]=d.onSlideCompleteTimer(10*(k+1),m,g,a(g).children(":eq("+p+")"),p,q));ia[q]=e;d.hideScrollbar(m, e,k,l,c,t,n,B,v,q);d.autoSlide(g,b,e,c,t,n,J,B,v,K,u,q,s,j,C,m)},autoSlide:function(a,g,b,e,c,t,n,J,B,v,K,u,q,s,j,C){if(!C.autoSlide)return!1;d.autoSlidePause(u);ha[u]=setTimeout(function(){!C.infiniteSlider&&G[u]>K.length-1&&(G[u]-=s);d.changeSlide((G[u]+x[u]+s+1)%s,a,g,b,e,c,t,n,J,B,v,K,u,q,s,j,C);d.autoSlide(a,g,b,e,c,t,n,J,B,v,K,u,q,s,j,C)},C.autoSlideTimer+C.autoSlideTransTimer)},autoSlidePause:function(a){clearTimeout(ha[a])},isUnselectable:function(d,g){return""!=g.unselectableSelector&&1== a(d).closest(g.unselectableSelector).size()?!0:!1},slowScrollHorizontalIntervalTimer:function(a,g,b,e,c,t,n,x,B,v,G,u,q,s,j,C,m,k,p){return setTimeout(function(){d.slowScrollHorizontalInterval(g,b,e,c,t,n,x,B,v,G,u,q,s,j,C,m,k,p)},a)},onSlideCompleteTimer:function(a,g,b,e,c,t){return setTimeout(function(){d.onSlideComplete(g,b,e,c,t)},a)},hideScrollbarIntervalTimer:function(a,g,b,e,c,t,n,x,B,v){return setTimeout(function(){d.hideScrollbarInterval(g,b,e,c,t,n,x,B,v)},a)},args:function(f,e,b,n,c,t){this.settings= f;this.data=a(e).parent().data("iosslider");this.slideChanged=t;this.sliderObject=e;this.sliderContainerObject=a(e).parent();this.currentSlideObject=b;this.currentSlideNumber=n+1;this.targetSlideObject=a(e).children(":eq("+c+")");this.targetSlideNumber=c+1;this.currentSliderOffset=-1*d.getSliderOffset(e,"y");try{this.prevSlideNumber=void 0==a(e).parent().data("args")?f.startAtSlide:a(e).parent().data("args").prevSlideNumber==this.currentSlideNumber?a(e).parent().data("args").currentSlideNumber:a(e).parent().data("args").prevSlideNumber, this.prevSlideObject=a(e).children(":eq("+this.prevSlideNumber+")")}catch(x){}},preventDrag:function(a){a.preventDefault()},preventClick:function(a){a.stopImmediatePropagation();return!1},enableClick:function(){return!0}};d.setBrowserInfo();var N={init:function(f,g){ca=d.has3DTransform();var b=a.extend(!0,{elasticPullResistance:0.6,frictionCoefficient:0.92,elasticFrictionCoefficient:0.6,snapFrictionCoefficient:0.92,snapToChildren:!1,snapSlideCenter:!1,startAtSlide:1,scrollbar:!0,scrollbarDrag:!1, scrollbarHide:!1,scrollbarLocation:"right",scrollbarContainer:"",scrollbarOpacity:0.4,scrollbarHeight:"4px",scrollbarBorder:"0",scrollbarMargin:"5px",scrollbarBackground:"#000",scrollbarBorderRadius:"100px",scrollbarShadow:"0 0 0 #000",scrollbarElasticPullResistance:0.9,desktopClickDrag:!1,keyboardControls:!1,tabToAdvance:!1,responsiveSlideContainer:!0,responsiveSlides:!0,navSlideSelector:"",navPrevSelector:"",navNextSelector:"",autoSlideToggleSelector:"",autoSlide:!1,autoSlideTimer:5E3,autoSlideTransTimer:750, infiniteSlider:!1,stageCSS:{position:"relative",top:"0",left:"0",overflow:"hidden",zIndex:1},unselectableSelector:"",onSliderLoaded:"",onSliderUpdate:"",onSliderResize:"",onSlideStart:"",onSlideChange:"",onSlideComplete:""},f);void 0==g&&(g=this);return a(g).each(function(){function f(){d.autoSlidePause(c);wa=a(D).find("a");Aa=a(D).find("[onclick]");pa=a(D).find("*");a(k).css("width","");a(k).css("height","");a(D).css("width","");z=a(D).children().not("script").get();ja=[];X=[];a(z).css("width",""); n[c]=0;h=[];j=a(k).parent().height();p=a(k).outerHeight(!0);b.responsiveSlideContainer&&(p=a(k).outerHeight(!0)>j?j:a(k).outerHeight(!0));a(k).css({position:b.stageCSS.position,top:b.stageCSS.top,left:b.stageCSS.left,overflow:b.stageCSS.overflow,zIndex:b.stageCSS.zIndex,webkitPerspective:1E3,webkitBackfaceVisibility:"hidden",height:p});a(b.unselectableSelector).css({cursor:"default"});for(var F=0;F<z.length;F++){ja[F]=a(z[F]).height();X[F]=a(z[F]).outerHeight(!0);var A=X[F];b.responsiveSlides&&(A= X[F]>p?p+-1*(X[F]-ja[F]):ja[F],a(z[F]).css({height:A}));a(z[F]).css({webkitBackfaceVisibility:"hidden",position:"absolute",top:0});h[F]=-1*n[c];n[c]=n[c]+A+(X[F]-ja[F])}b.snapSlideCenter&&(m=0.5*(p-X[0]),b.responsiveSlides&&X[0]>p&&(m=0));va[c]=2*n[c];for(F=0;F<z.length;F++)d.setSliderOffset(a(z[F]),-1*h[F]+n[c]+m),h[F]-=n[c];if(!b.infiniteSlider&&!b.snapSlideCenter){for(F=0;F<h.length&&!(h[F]<=-1*(2*n[c]-p));F++)ha=F;h.splice(ha+1,h.length);h[h.length]=-1*(2*n[c]-p)}for(F=0;F<h.length;F++)L[F]=h[F]; H&&(b.startAtSlide=P[c].startAtSlide>h.length?h.length:P[c].startAtSlide,b.infiniteSlider?(b.startAtSlide=(P[c].startAtSlide-1+I)%I,G[c]=P[c].startAtSlide):(b.startAtSlide=0>P[c].startAtSlide-1?h.length-1:P[c].startAtSlide,G[c]=P[c].startAtSlide-1),aa[c]=G[c]);e[c]=n[c]+m;a(D).css({position:"relative",cursor:ga,webkitPerspective:"0",webkitBackfaceVisibility:"hidden",height:n[c]+"px"});U=n[c];n[c]=2*n[c]-p+2*m;(R=U<p?!0:!1)&&a(D).css({cursor:"default"});C=a(k).parent().outerWidth(!0);r=a(k).width(); b.responsiveSlideContainer&&(r=r>C?C:r);a(k).css({width:r});d.setSliderOffset(D,h[G[c]]);if(b.infiniteSlider&&!R){F=d.getSliderOffset(a(D),"y");for(A=-1*((x[c]+I)%I);0>A;){var y=0,w=d.getSliderOffset(a(z[0]),"y");a(z).each(function(a){d.getSliderOffset(this,"y")<w&&(w=d.getSliderOffset(this,"y"),y=a)});var J=e[c]+U;d.setSliderOffset(a(z)[y],J);e[c]=-1*h[1]+m;n[c]=e[c]+U-p;h.splice(0,1);h.splice(h.length,0,-1*J+m);A++}for(;0<-1*h[0]-U+m&&b.snapSlideCenter&&H;){var xa=0,Q=d.getSliderOffset(a(z[0]), "y");a(z).each(function(a){d.getSliderOffset(this,"y")>Q&&(Q=d.getSliderOffset(this,"y"),xa=a)});J=e[c]-X[xa];d.setSliderOffset(a(z)[xa],J);h.splice(0,0,-1*J+m);h.splice(h.length-1,1);e[c]=-1*h[0]+m;n[c]=e[c]+U-p;x[c]--;G[c]++}for(;F<=-1*n[c];)y=0,w=d.getSliderOffset(a(z[0]),"y"),a(z).each(function(a){d.getSliderOffset(this,"x")<w&&(w=d.getSliderOffset(this,"y"),y=a)}),J=e[c]+U,d.setSliderOffset(a(z)[y],J),e[c]=-1*h[1]+m,n[c]=e[c]+U-p,h.splice(0,1),h.splice(h.length,0,-1*J+m),x[c]++,G[c]--}d.setSliderOffset(D, h[G[c]]);!M&&!b.desktopClickDrag&&a(D).css({cursor:"default"});b.scrollbar&&(a("."+B).css({margin:b.scrollbarMargin,overflow:"hidden",display:"none"}),a("."+B+" ."+v).css({border:b.scrollbarBorder}),l=parseInt(a("."+B).css("marginLeft"))+parseInt(a("."+B).css("marginRight")),E=parseInt(a("."+B+" ."+v).css("borderLeftWidth"),10)+parseInt(a("."+B+" ."+v).css("borderRightWidth"),10),q=""!=b.scrollbarContainer?a(b.scrollbarContainer).height():p,s=(q-l)/I,b.scrollbarHide||(N=b.scrollbarOpacity),a("."+ B).css({position:"absolute",top:0,height:q-l+"px",margin:b.scrollbarMargin}),"right"==b.scrollbarLocation?a("."+B).css("right","0"):a("."+B).css("left","0"),a("."+B+" ."+v).css({borderRadius:b.scrollbarBorderRadius,background:b.scrollbarBackground,width:b.scrollbarHeight,height:s-E+"px",minHeight:b.scrollbarHeight,border:b.scrollbarBorder,webkitPerspective:1E3,webkitBackfaceVisibility:"hidden",position:"relative",opacity:N,filter:"alpha(opacity:"+100*N+")",boxShadow:b.scrollbarShadow}),d.setSliderOffset(a("."+ B+" ."+v),Math.floor((-1*h[G[c]]-e[c]+m)/(n[c]-e[c]+m)*(q-l-s))),a("."+B).css({display:"block"}),K=a("."+B+" ."+v),u=a("."+B));b.scrollbarDrag&&!R&&a("."+B+" ."+v).css({cursor:ga});b.infiniteSlider&&(O=(n[c]+p)/3);""!=b.navSlideSelector&&a(b.navSlideSelector).each(function(F){a(this).css({cursor:"pointer"});a(this).unbind(Y).bind(Y,function(){d.changeSlide(F,D,z,g,v,s,p,q,l,E,L,h,c,O,I,m,b)})});""!=b.navPrevSelector&&(a(b.navPrevSelector).css({cursor:"pointer"}),a(b.navPrevSelector).unbind(Y).bind(Y, function(){var a=(G[c]+x[c]+I)%I;(0<a||b.infiniteSlider)&&d.changeSlide(a-1,D,z,g,v,s,p,q,l,E,L,h,c,O,I,m,b)}));""!=b.navNextSelector&&(a(b.navNextSelector).css({cursor:"pointer"}),a(b.navNextSelector).unbind(Y).bind(Y,function(){var a=(G[c]+x[c]+I)%I;(a<h.length-1||b.infiniteSlider)&&d.changeSlide(a+1,D,z,g,v,s,p,q,l,E,L,h,c,O,I,m,b)}));b.autoSlide&&!R&&(""!=b.autoSlideToggleSelector&&(a(b.autoSlideToggleSelector).css({cursor:"pointer"}),a(b.autoSlideToggleSelector).unbind(Y).bind(Y,function(){ea? (d.autoSlide(D,z,g,v,s,p,q,l,E,L,h,c,O,I,m,b),ea=!1,a(b.autoSlideToggleSelector).removeClass("on")):(d.autoSlidePause(c),ea=!0,a(b.autoSlideToggleSelector).addClass("on"))})),!ea&&!R&&d.autoSlide(D,z,g,v,s,p,q,l,E,L,h,c,O,I,m,b),M?a(k).bind("touchend.iosSliderEvent",function(){!ea&&!R&&d.autoSlide(D,z,g,v,s,p,q,l,E,L,h,c,O,I,m,b)}):(a(k).bind("mouseenter.iosSliderEvent",function(){d.autoSlidePause(c)}),a(k).bind("mouseleave.iosSliderEvent",function(){!ea&&!R&&d.autoSlide(D,z,g,v,s,p,q,l,E,L,h,c,O, I,m,b)})));a(k).data("iosslider",{obj:Ba,settings:b,scrollerNode:D,slideNodes:z,numberOfSlides:I,centeredSlideOffset:m,sliderNumber:c,originalOffsets:L,childrenOffsets:h,sliderMax:n[c],scrollbarClass:v,scrollbarWidth:s,scrollbarStageWidth:q,stageWidth:p,scrollMargin:l,scrollBorder:E,infiniteSliderOffset:x[c],infiniteSliderWidth:O});H=!1;return!0}ma++;var c=ma,g=[];P[c]=b;e[c]=0;n[c]=0;var Q=[0,0],J=[0,0],B="scrollbarBlock"+ma,v="scrollbar"+ma,K,u,q,s,j,C,m=0,k=a(this),p,r,l,E,y,H=!0,w=-1,h,L=[],N= 0,T=0,ca=0,D=a(this).children(":first-child"),z,ja,X,I=a(D).children().not("script").size(),V=!1,ha=0,ya=!1,qa=void 0,O;x[c]=0;var R=!1;oa[c]=-1;var ea=!1;ua[c]=!1;var ra,sa=!1,ka=!1,U,Y=M?"touchstart.iosSliderEvent":"click.iosSliderEvent",wa,Aa,pa;da[c]=!1;ia[c]=[];b.scrollbarDrag&&(b.scrollbar=!0,b.scrollbarHide=!1);var Ba=a(this);if(void 0!=Ba.data("iosslider"))return!0;a(this).find("img").bind("dragstart.iosSliderEvent",function(a){a.preventDefault()});b.infiniteSlider&&(b.scrollbar=!1);b.scrollbar&& (""!=b.scrollbarContainer?a(b.scrollbarContainer).append("<div class = '"+B+"'><div class = '"+v+"'></div></div>"):a(D).parent().append("<div class = '"+B+"'><div class = '"+v+"'></div></div>"));if(!f())return!0;a(this).find("a").bind("mousedown",d.preventDrag);a(this).find("[onclick]").bind("click",d.preventDrag).each(function(){a(this).data("onclick",this.onclick)});var w=d.calcActiveOffset(b,d.getSliderOffset(a(D),"y"),h,p,x[c],I,void 0,c),w=(w+x[c]+I)%I,fa=new d.args(b,D,a(D).children(":eq("+ w+")"),w,w,!1);a(k).data("args",fa);if(""!=b.onSliderLoaded)b.onSliderLoaded(fa);oa[c]=w;if(P[c].responsiveSlides||P[c].responsiveSlideContainer)w=Ca?"orientationchange":"resize",a(window).bind(w+".iosSliderEvent",function(){if(!f())return!0;var c=a(k).data("args");if(""!=b.onSliderResize)b.onSliderResize(c)});(b.keyboardControls||b.tabToAdvance)&&!R&&a(document).bind("keydown.iosSliderEvent",function(a){!Z&&!$&&(a=a.originalEvent);if(37==a.keyCode&&b.keyboardControls)a.preventDefault(),a=(G[c]+x[c]+ I)%I,(0<a||b.infiniteSlider)&&d.changeSlide(a-1,D,z,g,v,s,p,q,l,E,L,h,c,O,I,m,b);else if(39==a.keyCode&&b.keyboardControls||9==a.keyCode&&b.tabToAdvance)a.preventDefault(),a=(G[c]+x[c]+I)%I,(a<h.length-1||b.infiniteSlider)&&d.changeSlide(a+1,D,z,g,v,s,p,q,l,E,L,h,c,O,I,m,b)});if(M||b.desktopClickDrag){var fa=M?"touchstart.iosSliderEvent":"mousedown.iosSliderEvent",la=a(D),w=a(D),za=!1;b.scrollbarDrag&&(la=la.add(K),w=w.add(u));a(la).bind(fa,function(f){if(da[c]||R||(za=d.isUnselectable(f.target,b)))return!0; ra=a(this)[0]===a(K)[0]?K:D;!Z&&!$&&(f=f.originalEvent);d.autoSlidePause(c);pa.unbind(".disableClick");M?(eventX=f.touches[0].pageY,eventY=f.touches[0].pageX):(window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),eventX=f.pageY,eventY=f.pageX,ya=!0,qa=D,a(this).css({cursor:ta}));Q=[0,0];J=[0,0];W=0;V=!1;for(f=0;f<g.length;f++)clearTimeout(g[f]);f=d.getSliderOffset(D, "y");f>-1*e[c]+m+U?(f=-1*e[c]+m+U,d.setSliderOffset(a("."+v),f),a("."+v).css({height:s-E+"px"})):f<-1*n[c]&&(d.setSliderOffset(a("."+v),q-l-s),a("."+v).css({height:s-E+"px"}));f=a(this)[0]===a(K)[0]?e[c]:0;T=-1*(d.getSliderOffset(this,"y")-eventX-f);d.getSliderOffset(this,"y");Q[1]=eventX;J[1]=eventY;ka=!1});fa=M?"touchmove.iosSliderEvent":"mousemove.iosSliderEvent";a(w).bind(fa,function(f){!Z&&!$&&(f=f.originalEvent);if(da[c]||R||za)return!0;var g=0;M||(window.getSelection?window.getSelection().empty? window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty());if(M)eventX=f.touches[0].pageY,eventY=f.touches[0].pageX;else if(eventX=f.pageY,eventY=f.pageX,!ya||!na&&("undefined"!=typeof f.webkitMovementX||"undefined"!=typeof f.webkitMovementY)&&0===f.webkitMovementY&&0===f.webkitMovementX)return!1;Q[0]=Q[1];Q[1]=eventX;W=(Q[1]-Q[0])/2;J[0]=J[1];J[1]=eventY;ba=(J[1]-J[0])/2;if(!V){var j=(G[c]+x[c]+I)%I, j=new d.args(b,D,a(D).children(":eq("+j+")"),j,j,!1);a(k).data("args",j);if(""!=b.onSlideStart)b.onSlideStart(j)}if((3<ba||-3>ba)&&3>W&&-3<W&&M&&!V)sa=!0;(5<W||-5>W)&&M?(f.preventDefault(),V=!0):M||(V=!0);if(V&&!sa){var j=d.getSliderOffset(D,"y"),A=a(this)[0]===a(u)[0]?e[c]:m,t=a(this)[0]===a(u)[0]?(e[c]-n[c]-m)/(q-l-s):1,r=a(this)[0]===a(u)[0]?b.scrollbarElasticPullResistance:b.elasticPullResistance,B=b.snapSlideCenter&&a(this)[0]===a(u)[0]?0:m,C=b.snapSlideCenter&&a(this)[0]===a(u)[0]?m:0;M&&(ca!= f.touches.length&&(T=-1*j+eventX),ca=f.touches.length);if(b.infiniteSlider){if(j<=-1*n[c]){var w=a(D).height();if(j<=-1*va[c]){var H=-1*L[0];a(z).each(function(b){d.setSliderOffset(a(z)[b],H+m);b<h.length&&(h[b]=-1*H);H+=a(this).outerHeight(!0)});T-=-1*h[0];e[c]=-1*h[0]+m;n[c]=e[c]+w-p;x[c]=0}else{var K=0,O=d.getSliderOffset(a(z[0]),"y");a(z).each(function(a){d.getSliderOffset(this,"y")<O&&(O=d.getSliderOffset(this,"y"),K=a)});r=e[c]+w;d.setSliderOffset(a(z)[K],r);e[c]=-1*h[1]+m;n[c]=e[c]+w-p;h.splice(0, 1);h.splice(h.length,0,-1*r+m);x[c]++}}if(j>=-1*e[c]||0<=j)if(w=a(D).height(),0<=j){H=-1*L[0];a(z).each(function(b){d.setSliderOffset(a(z)[b],H+m);b<h.length&&(h[b]=-1*H);H+=a(this).outerHeight(!0)});T+=-1*h[0];e[c]=-1*h[0]+m;n[c]=e[c]+w-p;for(x[c]=I;0<-1*h[0]-w+m;){var N=0,P=d.getSliderOffset(a(z[0]),"y");a(z).each(function(a){d.getSliderOffset(this,"y")>P&&(P=d.getSliderOffset(this,"y"),N=a)});r=e[c]-a(z[N]).outerHeight(!0);d.setSliderOffset(a(z)[N],r);h.splice(0,0,-1*r+m);h.splice(h.length-1,1); e[c]=-1*h[0]+m;n[c]=e[c]+w-p;x[c]--;G[c]++}}else N=0,P=d.getSliderOffset(a(z[0]),"y"),a(z).each(function(a){d.getSliderOffset(this,"y")>P&&(P=d.getSliderOffset(this,"y"),N=a)}),r=e[c]-a(z[N]).outerHeight(!0),d.setSliderOffset(a(z)[N],r),h.splice(0,0,-1*r+m),h.splice(h.length-1,1),e[c]=-1*h[0]+m,n[c]=e[c]+w-p,x[c]--}else w=a(D).height(),j>-1*e[c]+m&&(g=-1*(e[c]+-1*(T-A-eventX+B)*t-A)*r/t),j<-1*n[c]&&(g=-1*(n[c]+C+-1*(T-A-eventX)*t-A)*r/t);d.setSliderOffset(D,-1*(T-A-eventX-g)*t-A+C);b.scrollbar&&(d.showScrollbar(b, v),S=Math.floor((T-eventX-g-e[c]+B)/(n[c]-e[c]+m)*(q-l-s)*t),A=s,j>=-1*e[c]+B+w?(A=s-E- -1*S,d.setSliderOffset(a("."+v),0),a("."+v).css({height:A+"px"})):j<=-1*n[c]+1?(A=q-l-E-S,d.setSliderOffset(a("."+v),S),a("."+v).css({height:A+"px"})):d.setSliderOffset(a("."+v),S));M&&(y=f.touches[0].pageX);f=!1;g=d.calcActiveOffset(b,-1*(T-eventX-g),h,p,x[c],I,void 0,c);w=(g+x[c]+I)%I;b.infiniteSlider?w!=aa[c]&&(f=!0):g!=G[c]&&(f=!0);if(f&&(G[c]=g,aa[c]=w,ka=!0,j=new d.args(b,D,a(D).children(":eq("+w+")"),w, w,!0),a(k).data("args",j),""!=b.onSlideChange))b.onSlideChange(j)}});a(la).bind("touchend.iosSliderEvent",function(a){a=a.originalEvent;if(da[c]||R||za)return!0;if(0!=a.touches.length)for(var f=0;f<a.touches.length;f++)a.touches[f].pageX==y&&d.slowScrollHorizontal(D,z,g,v,W,ba,s,p,q,l,E,L,h,c,O,I,ra,ka,m,b);else d.slowScrollHorizontal(D,z,g,v,W,ba,s,p,q,l,E,L,h,c,O,I,ra,ka,m,b);sa=!1});if(!M){w=a(window);if($||Z)w=a(document);a(w).bind("mouseup.iosSliderEvent"+c,function(){V?wa.unbind("click.disableClick").bind("click.disableClick", d.preventClick):wa.unbind("click.disableClick").bind("click.disableClick",d.enableClick);Aa.each(function(){this.onclick=function(b){if(V)return!1;a(this).data("onclick").call(this,b||window.event)}});1.8<=parseFloat(a().jquery)?pa.each(function(){var b=a._data(this,"events");if(void 0!=b&&void 0!=b.click&&"iosSliderEvent"!=b.click[0].namespace){if(!V)return!1;a(this).one("click.disableClick",d.preventClick);var b=a._data(this,"events").click,c=b.pop();b.splice(0,0,c)}}):1.6<=parseFloat(a().jquery)&& pa.each(function(){var b=a(this).data("events");if(void 0!=b&&void 0!=b.click&&"iosSliderEvent"!=b.click[0].namespace){if(!V)return!1;a(this).one("click.disableClick",d.preventClick);var b=a(this).data("events").click,c=b.pop();b.splice(0,0,c)}});if(!ua[c]){if(R)return!0;a(la).css({cursor:ga});ya=!1;if(void 0==qa)return!1;d.slowScrollHorizontal(qa,z,g,v,W,ba,s,p,q,l,E,L,h,c,O,I,ra,ka,m,b);qa=void 0}sa=!1})}}})},destroy:function(f,g){void 0==g&&(g=this);return a(g).each(function(){var b=a(this),g= b.data("iosslider");if(void 0==g)return!1;void 0==f&&(f=!0);d.autoSlidePause(g.sliderNumber);ua[g.sliderNumber]=!0;a(window).unbind(".iosSliderEvent-"+g.sliderNumber);a(window).unbind(".iosSliderEvent");a(document).unbind(".iosSliderEvent-"+g.sliderNumber);a(this).unbind(".iosSliderEvent");a(document).unbind("keydown.iosSliderEvent");a(this).children(":first-child").unbind(".iosSliderEvent");a(this).children(":first-child").children().unbind(".iosSliderEvent");f&&(a(this).attr("style",""),a(this).children(":first-child").attr("style", ""),a(this).children(":first-child").children().attr("style",""),a(g.settings.navSlideSelector).attr("style",""),a(g.settings.navPrevSelector).attr("style",""),a(g.settings.navNextSelector).attr("style",""),a(g.settings.autoSlideToggleSelector).attr("style",""),a(g.settings.unselectableSelector).attr("style",""));g.settings.scrollbar&&a(".scrollbarBlock"+g.sliderNumber).remove();for(var g=ia[g.sliderNumber],c=0;c<g.length;c++)clearTimeout(g[c]);b.removeData(["iosslider","args"])})},update:function(f){void 0== f&&(f=this);return a(f).each(function(){var f=a(this),b=f.data("iosslider");if(void 0==b)return!1;b.settings.startAtSlide=f.data("args").currentSlideNumber;N.destroy(!1,this);1!=b.numberOfSlides&&b.settings.infiniteSlider&&(b.settings.startAtSlide=(G[b.sliderNumber]+1+x[b.sliderNumber]+b.numberOfSlides)%b.numberOfSlides);N.init(b.settings,this);f=new d.args(b.settings,b.scrollerNode,a(b.scrollerNode).children(":eq("+(b.settings.startAtSlide-1)+")"),b.settings.startAtSlide-1,b.settings.startAtSlide- 1,!1);a(b.stageNode).data("args",f);if(""!=b.settings.onSliderUpdate)b.settings.onSliderUpdate(f)})},addSlide:function(f,d){return this.each(function(){var b=a(this),e=b.data("iosslider");if(void 0==e)return!1;e.settings.infiniteSlider?(1==d?a(e.scrollerNode).children(":eq(0)").before(f):a(e.scrollerNode).children(":eq("+(d-2)+")").after(f),-1>x[e.sliderNumber]&&G[e.sliderNumber]--,b.data("args").currentSlideNumber>=d&&G[e.sliderNumber]++):(d<=e.numberOfSlides?a(e.scrollerNode).children(":eq("+(d- 1)+")").before(f):a(e.scrollerNode).children(":eq("+(d-2)+")").after(f),b.data("args").currentSlideNumber>=d&&b.data("args").currentSlideNumber++);b.data("iosslider").numberOfSlides++;N.update(this)})},removeSlide:function(d){return this.each(function(){var e=a(this).data("iosslider");if(void 0==e)return!1;a(e.scrollerNode).children(":eq("+(d-1)+")").remove();G[e.sliderNumber]>d-1&&G[e.sliderNumber]--;N.update(this)})},goToSlide:function(f,e){void 0==e&&(e=this);return a(e).each(function(){var b= a(this).data("iosslider");if(void 0==b)return!1;f=f>b.childrenOffsets.length?b.childrenOffsets.length-1:f-1;d.changeSlide(f,a(b.scrollerNode),a(b.slideNodes),ia[b.sliderNumber],b.scrollbarClass,b.scrollbarWidth,b.stageWidth,b.scrollbarStageWidth,b.scrollMargin,b.scrollBorder,b.originalOffsets,b.childrenOffsets,b.sliderNumber,b.infiniteSliderWidth,b.numberOfSlides,b.centeredSlideOffset,b.settings);G[b.sliderNumber]=f})},lock:function(){return this.each(function(){var d=a(this).data("iosslider");if(void 0== d)return!1;da[d.sliderNumber]=!0})},unlock:function(){return this.each(function(){var d=a(this).data("iosslider");if(void 0==d)return!1;da[d.sliderNumber]=!1})},getData:function(){return this.each(function(){var d=a(this).data("iosslider");return void 0==d?!1:d})}};a.fn.iosSlider=function(d){if(N[d])return N[d].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof d||!d)return N.init.apply(this,arguments);a.error("invalid method call!")}})(jQuery);