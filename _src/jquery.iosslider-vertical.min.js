/*
 * iosSlider-vertical - http://iosscripts.com/iosslider-vertical/
 * 
 * A jQuery Vertical Slider for iPhone/iPad Safari 
 * This plugin turns any tall element into a touch enabled vertical slider.
 * 
 * Copyright (c) 2012 Marc Whitbread
 * 
 * Version: v0.1.0 (beta) (12/16/2012)
 * Minimum requirements: jQuery v1.4+
 *
 * Advanced requirements:
 * 1) jQuery bind() click event override on slide requires jQuery v1.6+
 *
 * Terms of use:
 *
 * 1) iosSlider is licensed under the Creative Commons â€“ Attribution-NonCommercial 3.0 License.
 * 2) You may use iosSlider free for personal or non-profit purposes, without restriction.
 *	  Attribution is not required but always appreciated. For commercial projects, you
 *	  must purchase a license. You may download and play with the script before deciding to
 *	  fully implement it in your project. Making sure you are satisfied, and knowing iosSlider
 *	  is the right script for your project is paramount.
 * 3) You are not permitted to make the resources found on iosscripts.com available for
 *    distribution elsewhere "as is" without prior consent. If you would like to feature
 *    iosSlider on your site, please do not link directly to the resource zip files. Please
 *    link to the appropriate page on iosscripts.com where users can find the download.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 * COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 * GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 */
 
(function(a){var ja=0,T=0,$=0,P=0,L="ontouchstart"in window,Ba="onorientationchange"in window,aa=!1,Y=!1,Z=!1,ka=!1,ea="pointer",ra="pointer",la=[],fa=[],sa=[],ta=[],ga=[],E=[],U=[],x=[],f=[],n=[],ua=[],ba=[],d={showScrollbar:function(h,d){h.scrollbarHide&&a("."+d).css({opacity:h.scrollbarOpacity,filter:"alpha(opacity:"+100*h.scrollbarOpacity+")"})},hideScrollbar:function(a,e,b,A,c,q,f,n,w,v){if(a.scrollbar&&a.scrollbarHide)for(var x=b;x<b+25;x++)e[e.length]=d.hideScrollbarIntervalTimer(10*x,A[b], (b+24-x)/24,c,q,f,n,w,v,a)},hideScrollbarInterval:function(h,e,b,A,c,q,f,x,w){P=-1*h/n[x]*(c-q-f-A);d.setSliderOffset("."+b,P);a("."+b).css({opacity:w.scrollbarOpacity*e,filter:"alpha(opacity:"+100*w.scrollbarOpacity*e+")"})},slowScrollHorizontalInterval:function(h,e,b,A,c,q,N,J,w,v,I,u,s,t,l,C,m,i){if(i.infiniteSlider){if(b<=-1*n[l]){var r=a(h).width();if(b<=-1*ua[l]){var p=-1*I[0];a(e).each(function(b){d.setSliderOffset(a(e)[b],p+C);b<u.length&&(u[b]=-1*p);p+=a(this).outerWidth(!0)});b+=-1*u[0]; f[l]=-1*u[0]+C;n[l]=f[l]+r-q;x[l]=0}else{var j=0,D=d.getSliderOffset(a(e[0]),"x");a(e).each(function(b){d.getSliderOffset(this,"x")<D&&(D=d.getSliderOffset(this,"x"),j=b)});s=f[l]+r;d.setSliderOffset(a(e)[j],s);f[l]=-1*u[1]+C;n[l]=f[l]+r-q;u.splice(0,1);u.splice(u.length,0,-1*s+C);x[l]++}}if(b>=-1*f[l]||0<=b){r=a(h).width();if(0<=b){p=-1*I[0];a(e).each(function(b){d.setSliderOffset(a(e)[b],p+C);b<u.length&&(u[b]=-1*p);p+=a(this).outerWidth(!0)});b-=-1*u[0];f[l]=-1*u[0]+C;n[l]=f[l]+r-q;for(x[l]=t;0< -1*u[0]-r+C;){var y=0,F=d.getSliderOffset(a(e[0]),"x");a(e).each(function(b){d.getSliderOffset(this,"x")>F&&(F=d.getSliderOffset(this,"x"),y=b)});s=f[l]-a(e[y]).outerWidth(!0);d.setSliderOffset(a(e)[y],s);u.splice(0,0,-1*s+C);u.splice(u.length-1,1);f[l]=-1*u[0]+C;n[l]=f[l]+r-q;x[l]--;E[l]++}}0>b&&(y=0,F=d.getSliderOffset(a(e[0]),"x"),a(e).each(function(b){d.getSliderOffset(this,"x")>F&&(F=d.getSliderOffset(this,"x"),y=b)}),s=f[l]-a(e[y]).outerWidth(!0),d.setSliderOffset(a(e)[y],s),u.splice(0,0,-1* s+C),u.splice(u.length-1,1),f[l]=-1*u[0]+C,n[l]=f[l]+r-q,x[l]--)}}I=!1;q=d.calcActiveOffset(i,b,u,q,x[l],t,v,l);s=(q+x[l]+t)%t;i.infiniteSlider?s!=U[l]&&(I=!0):q!=E[l]&&(I=!0);if(I&&(t=U[l],m=new d.args(i,h,a(h).children(":eq("+s+")"),t,m,!0),a(h).parent().data("args",m),""!=i.onSlideChange))i.onSlideChange(m);E[l]=q;U[l]=s;b=Math.floor(b);d.setSliderOffset(h,b);i.scrollbar&&(P=Math.floor((-1*b-f[l])/(n[l]-f[l])*(N-J-c)),h=c-w,b>=-1*f[l]?(h=c-w- -1*P,d.setSliderOffset(a("."+A),0)):(b<=-1*n[l]+1&& (h=N-J-w-P),d.setSliderOffset(a("."+A),P)),a("."+A).css({width:h+"px"}))},slowScrollHorizontal:function(h,e,b,A,c,q,N,J,w,v,I,u,s,t,l,C,m,i,r,p){var q=[],j=d.getSliderOffset(h,"x"),D=0,y=25/1024*J;frictionCoefficient=p.frictionCoefficient;elasticFrictionCoefficient=p.elasticFrictionCoefficient;snapFrictionCoefficient=p.snapFrictionCoefficient;5<c&&p.snapToChildren&&!i?D=1:-5>c&&(p.snapToChildren&&!i)&&(D=-1);c<-1*y?c=-1*y:c>y&&(c=y);a(h)[0]!==a(m)[0]&&(D*=-1,c*=-2);m=x[t];if(p.infiniteSlider)var F= f[t],H=n[t];for(var i=[],y=[],g=0;g<s.length;g++)i[g]=s[g],g<e.length&&(y[g]=d.getSliderOffset(a(e[g]),"x"));for(;1<c||-1>c;){c*=frictionCoefficient;j+=c;if((j>-1*f[t]||j<-1*n[t])&&!p.infiniteSlider)c*=elasticFrictionCoefficient,j+=c;if(p.infiniteSlider){if(j<=-1*H){for(var H=a(h).width(),K=0,L=y[0],g=0;g<y.length;g++)y[g]<L&&(L=y[g],K=g);g=F+H;y[K]=g;F=-1*i[1]+r;H=F+H-J;i.splice(0,1);i.splice(i.length,0,-1*g+r);m++}if(j>=-1*F){H=a(h).width();K=0;L=y[0];for(g=0;g<y.length;g++)y[g]>L&&(L=y[g],K=g); g=F-a(e[K]).outerWidth(!0);y[K]=g;i.splice(0,0,-1*g+r);i.splice(i.length-1,1);F=-1*i[0]+r;H=F+H-J;m--}}q[q.length]=j}y=!1;c=d.calcActiveOffset(p,j,i,J,m,C,E[t],t);F=(c+m+C)%C;p.snapToChildren&&(p.infiniteSlider?F!=U[t]&&(y=!0):c!=E[t]&&(y=!0),0>D&&!y?(c++,c>=s.length&&!p.infinteSlider&&(c=s.length-1)):0<D&&!y&&(c--,0>c&&!p.infinteSlider&&(c=0)));if(p.snapToChildren||(j>-1*f[t]||j<-1*n[t])&&!p.infiniteSlider){j=d.getSliderOffset(h,"x");for(q.splice(0,q.length);j<i[c]-0.5||j>i[c]+0.5;)j=(j-i[c])*snapFrictionCoefficient+ i[c],q[q.length]=j;q[q.length]=i[c]}D=1;0!=q.length%2&&(D=0);for(j=0;j<b.length;j++)clearTimeout(b[j]);m=(c+m+C)%C;F=0;for(j=D;j<q.length;j+=2)if(j==D||1<Math.abs(q[j]-F)||j>=q.length-2)F=q[j],b[b.length]=d.slowScrollHorizontalIntervalTimer(10*j,h,e,q[j],A,N,J,w,v,I,c,u,s,l,C,t,r,m,p);F=(c+x[t]+C)%C;""!=p.onSlideComplete&&(b[b.length]=d.onSlideCompleteTimer(10*(j+1),p,h,a(h).children(":eq("+F+")"),F,t));ga[t]=b;d.hideScrollbar(p,b,j,q,A,N,J,v,I,t)},onSlideComplete:function(h,e,b,A,c){var q=la[c]!= A?!0:!1,b=new d.args(h,a(e),b,A,A,q);a(e).parent().data("args",b);if(""!=h.onSlideComplete)h.onSlideComplete(b);la[c]=A},getSliderOffset:function(h,d){var b=0,d="x"==d?4:5;if(aa&&!Y&&!Z){for(var b=["-webkit-transform","-moz-transform","transform"],A=0;A<b.length;A++)if(void 0!=a(h).css(b[A])&&0<a(h).css(b[A]).length){var c=a(h).css(b[A]).split(",");break}b=parseInt(c[d],10)}else b=parseInt(a(h).css("left"),10);return b},setSliderOffset:function(h,d){aa&&!Y&&!Z?a(h).css({webkitTransform:"matrix(1,0,0,1,"+ d+",0)",MozTransform:"matrix(1,0,0,1,"+d+",0)",transform:"matrix(1,0,0,1,"+d+",0)"}):a(h).css({left:d+"px"})},setBrowserInfo:function(){null!=navigator.userAgent.match("WebKit")?(ea="-webkit-grab",ra="-webkit-grabbing"):null!=navigator.userAgent.match("Gecko")?(ea="move",ra="-moz-grabbing"):null!=navigator.userAgent.match("MSIE 7")?ka=Y=!0:null!=navigator.userAgent.match("MSIE 8")?ka=Z=!0:null!=navigator.userAgent.match("MSIE 9")&&(ka=!0)},has3DTransform:function(){var d=!1,e=a("<div />").css({webkitTransform:"matrix(1,1,1,1,1,1)", MozTransform:"matrix(1,1,1,1,1,1)",transform:"matrix(1,1,1,1,1,1)"});""==e.attr("style")?d=!1:void 0!=e.attr("style")&&(d=!0);return d},getSlideNumber:function(a,d,b){return(a-x[d]+b)%b},calcActiveOffset:function(a,d,b,A){for(var c=!1,a=[],q,f=0;f<b.length;f++)b[f]<=d&&b[f]>d-A&&(!c&&b[f]!=d&&(a[a.length]=b[f-1]),a[a.length]=b[f],c=!0);0==a.length&&(a[0]=b[b.length-1]);for(f=c=0;f<a.length;f++){var n=Math.abs(d-a[f]);n<A&&(c=a[f],A=n)}for(f=0;f<b.length;f++)c==b[f]&&(q=f);return q},changeSlide:function(h, e,b,f,c,q,n,J,w,v,I,u,s,t,l,C,m){d.autoSlidePause(s);for(var i=0;i<f.length;i++)clearTimeout(f[i]);var r=Math.ceil(m.autoSlideTransTimer/10)+1,p=d.getSliderOffset(e,"x"),j=u[h],D=j-p;if(m.infiniteSlider){h=(h-x[s]+2*l)%l;i=!1;0==h&&2==l&&(h=l,u[h]=u[h-1]-a(b).eq(0).outerWidth(!0),i=!0);j=u[h];D=j-p;j=[u[h]-a(e).width(),u[h]+a(e).width()];i&&u.splice(u.length-1,1);for(i=0;i<j.length;i++)Math.abs(j[i]-p)<Math.abs(D)&&(D=j[i]-p)}var j=[],y;d.showScrollbar(m,c);for(i=0;i<=r;i++)y=i,y/=r,y--,y=p+D*(Math.pow(y, 5)+1),j[j.length]=y;for(i=p=0;i<j.length;i++){if(0==i||1<Math.abs(j[i]-p)||i>=j.length-2)p=j[i],f[i]=d.slowScrollHorizontalIntervalTimer(10*(i+1),e,b,j[i],c,q,n,J,w,v,h,I,u,t,l,s,C,h,m);0==i&&""!=m.onSlideStart&&(r=(E[s]+x[s]+l)%l,m.onSlideStart(new d.args(m,e,a(e).children(":eq("+r+")"),r,h,!1)))}p=!1;r=(h+x[s]+l)%l;m.infiniteSlider?r!=U[s]&&(p=!0):h!=E[s]&&(p=!0);p&&""!=m.onSlideComplete&&(f[f.length]=d.onSlideCompleteTimer(10*(i+1),m,e,a(e).children(":eq("+r+")"),r,s));ga[s]=f;d.hideScrollbar(m, f,i,j,c,q,n,w,v,s);d.autoSlide(e,b,f,c,q,n,J,w,v,I,u,s,t,l,C,m)},autoSlide:function(a,e,b,f,c,q,n,J,w,v,I,u,s,t,l,C){if(!C.autoSlide)return!1;d.autoSlidePause(u);fa[u]=setTimeout(function(){!C.infiniteSlider&&E[u]>I.length-1&&(E[u]-=t);d.changeSlide((E[u]+x[u]+t+1)%t,a,e,b,f,c,q,n,J,w,v,I,u,s,t,l,C);d.autoSlide(a,e,b,f,c,q,n,J,w,v,I,u,s,t,l,C)},C.autoSlideTimer+C.autoSlideTransTimer)},autoSlidePause:function(a){clearTimeout(fa[a])},isUnselectable:function(d,e){return""!=e.unselectableSelector&&1== a(d).closest(e.unselectableSelector).size()?!0:!1},slowScrollHorizontalIntervalTimer:function(a,e,b,f,c,q,n,x,w,v,E,u,s,t,l,C,m,i,r){return setTimeout(function(){d.slowScrollHorizontalInterval(e,b,f,c,q,n,x,w,v,E,u,s,t,l,C,m,i,r)},a)},onSlideCompleteTimer:function(a,f,b,n,c,q){return setTimeout(function(){d.onSlideComplete(f,b,n,c,q)},a)},hideScrollbarIntervalTimer:function(a,f,b,n,c,q,x,E,w,v){return setTimeout(function(){d.hideScrollbarInterval(f,b,n,c,q,x,E,w,v)},a)},args:function(h,f,b,n,c,q){this.settings= h;this.data=a(f).parent().data("iosslider");this.slideChanged=q;this.sliderObject=f;this.sliderContainerObject=a(f).parent();this.currentSlideObject=b;this.currentSlideNumber=n+1;this.targetSlideObject=a(f).children(":eq("+c+")");this.targetSlideNumber=c+1;this.currentSliderOffset=-1*d.getSliderOffset(f,"x")},preventDrag:function(a){a.preventDefault()},preventClick:function(a){a.stopImmediatePropagation();return!1},enableClick:function(){return!0}};d.setBrowserInfo();var R={init:function(h,e){aa= d.has3DTransform();var b=a.extend(!0,{elasticPullResistance:0.6,frictionCoefficient:0.92,elasticFrictionCoefficient:0.6,snapFrictionCoefficient:0.92,snapToChildren:!1,snapSlideCenter:!1,startAtSlide:1,scrollbar:!1,scrollbarDrag:!1,scrollbarHide:!0,scrollbarLocation:"top",scrollbarContainer:"",scrollbarOpacity:0.4,scrollbarHeight:"4px",scrollbarBorder:"0",scrollbarMargin:"5px",scrollbarBackground:"#000",scrollbarBorderRadius:"100px",scrollbarShadow:"0 0 0 #000",scrollbarElasticPullResistance:0.9,desktopClickDrag:!1, keyboardControls:!1,responsiveSlideContainer:!0,responsiveSlides:!0,navSlideSelector:"",navPrevSelector:"",navNextSelector:"",autoSlideToggleSelector:"",autoSlide:!1,autoSlideTimer:5E3,autoSlideTransTimer:750,infiniteSlider:!1,stageCSS:{position:"relative",top:"0",left:"0",overflow:"hidden",zIndex:1},unselectableSelector:"",onSliderLoaded:"",onSliderUpdate:"",onSliderResize:"",onSlideStart:"",onSlideChange:"",onSlideComplete:""},h);void 0==e&&(e=this);return a(e).each(function(){function h(){d.autoSlidePause(c); va=a(B).find("a");ya=a(B).find("[onclick]");ma=a(B).find("*");a(i).css("width","");a(i).css("height","");a(B).css("width","");z=a(B).children().not("script").get();na=[];V=[];a(z).css("width","");n[c]=0;g=[];l=a(i).parent().width();r=a(i).outerWidth(!0);b.responsiveSlideContainer&&(r=a(i).outerWidth(!0)>l?l:a(i).outerWidth(!0));a(i).css({position:b.stageCSS.position,top:b.stageCSS.top,left:b.stageCSS.left,overflow:b.stageCSS.overflow,zIndex:b.stageCSS.zIndex,webkitPerspective:1E3,webkitBackfaceVisibility:"hidden", width:r});a(b.unselectableSelector).css({cursor:"default"});for(var k=0;k<z.length;k++){na[k]=a(z[k]).width();V[k]=a(z[k]).outerWidth(!0);var A=V[k];b.responsiveSlides&&(A=V[k]>r?r+-1*(V[k]-na[k]):na[k],a(z[k]).css({width:A}));a(z[k]).css({webkitBackfaceVisibility:"hidden",position:"absolute",top:0});g[k]=-1*n[c];n[c]+=A}b.snapSlideCenter&&(m=0.5*(r-V[0]),b.responsiveSlides&&V[0]>r&&(m=0));ua[c]=2*n[c];for(k=0;k<z.length;k++)d.setSliderOffset(a(z[k]),-1*g[k]+n[c]+m),g[k]-=n[c];if(!b.infiniteSlider&& !b.snapSlideCenter){for(k=0;k<g.length&&!(g[k]<=-1*(2*n[c]-r));k++)fa=k;g.splice(fa+1,g.length);g[g.length]=-1*(2*n[c]-r)}for(k=0;k<g.length;k++)K[k]=g[k];F&&(b.startAtSlide=b.startAtSlide>g.length?g.length:b.startAtSlide,b.startAtSlide=0>b.startAtSlide-1?g.length-1:b.startAtSlide,E[c]=b.startAtSlide-1,U[c]=E[c]);f[c]=n[c]+m;a(B).css({position:"relative",cursor:ea,webkitPerspective:"0",webkitBackfaceVisibility:"hidden",width:n[c]+"px"});W=n[c];n[c]=2*n[c]-r+2*m;(O=W<r?!0:!1)&&a(B).css({cursor:"default"}); C=a(i).parent().outerHeight(!0);p=a(i).height();b.responsiveSlideContainer&&(p=p>C?C:p);a(i).css({height:p});d.setSliderOffset(B,g[E[c]]);if(b.infiniteSlider&&!O){d.getSliderOffset(a(B),"x");for(k=-1*((x[c]+G)%G);0>k;){var y=0,H=d.getSliderOffset(a(z[0]),"x");a(z).each(function(a){d.getSliderOffset(this,"x")<H&&(H=d.getSliderOffset(this,"x"),y=a)});A=f[c]+W;d.setSliderOffset(a(z)[y],A);f[c]=-1*g[1]+m;n[c]=f[c]+W-r;g.splice(0,1);g.splice(g.length,0,-1*A+m);k++}for(;0<-1*g[0]-W+m&&b.snapSlideCenter&& F;){var J=0,za=d.getSliderOffset(a(z[0]),"x");a(z).each(function(a){d.getSliderOffset(this,"x")>za&&(za=d.getSliderOffset(this,"x"),J=a)});A=f[c]-V[J];d.setSliderOffset(a(z)[J],A);g.splice(0,0,-1*A+m);g.splice(g.length-1,1);f[c]=-1*g[0]+m;n[c]=f[c]+W-r;x[c]--;E[c]++}}d.setSliderOffset(B,g[E[c]]);!L&&!b.desktopClickDrag&&a(B).css({cursor:"default"});b.scrollbar&&(a("."+w).css({margin:b.scrollbarMargin,overflow:"hidden",display:"none"}),a("."+w+" ."+v).css({border:b.scrollbarBorder}),j=parseInt(a("."+ w).css("marginLeft"))+parseInt(a("."+w).css("marginRight")),D=parseInt(a("."+w+" ."+v).css("borderLeftWidth"),10)+parseInt(a("."+w+" ."+v).css("borderRightWidth"),10),s=""!=b.scrollbarContainer?a(b.scrollbarContainer).width():r,t=(s-j)/G,b.scrollbarHide||(R=b.scrollbarOpacity),a("."+w).css({position:"absolute",left:0,width:s-j+"px",margin:b.scrollbarMargin}),"top"==b.scrollbarLocation?a("."+w).css("top","0"):a("."+w).css("bottom","0"),a("."+w+" ."+v).css({borderRadius:b.scrollbarBorderRadius,background:b.scrollbarBackground, height:b.scrollbarHeight,width:t-D+"px",minWidth:b.scrollbarHeight,border:b.scrollbarBorder,webkitPerspective:1E3,webkitBackfaceVisibility:"hidden",position:"relative",opacity:R,filter:"alpha(opacity:"+100*R+")",boxShadow:b.scrollbarShadow}),d.setSliderOffset(a("."+w+" ."+v),Math.floor((-1*g[E[c]]-f[c]+m)/(n[c]-f[c])*(s-j-t))),a("."+w).css({display:"block"}),I=a("."+w+" ."+v),u=a("."+w));b.scrollbarDrag&&!O&&a("."+w+" ."+v).css({cursor:ea});b.infiniteSlider&&(M=(n[c]+r)/3);""!=b.navSlideSelector&& a(b.navSlideSelector).each(function(k){a(this).css({cursor:"pointer"});a(this).unbind(X).bind(X,function(){d.changeSlide(k,B,z,e,v,t,r,s,j,D,K,g,c,M,G,m,b)})});""!=b.navPrevSelector&&(a(b.navPrevSelector).css({cursor:"pointer"}),a(b.navPrevSelector).unbind(X).bind(X,function(){var a=(E[c]+x[c]+G)%G;(0<a||b.infiniteSlider)&&d.changeSlide(a-1,B,z,e,v,t,r,s,j,D,K,g,c,M,G,m,b)}));""!=b.navNextSelector&&(a(b.navNextSelector).css({cursor:"pointer"}),a(b.navNextSelector).unbind(X).bind(X,function(){var a= (E[c]+x[c]+G)%G;(a<g.length-1||b.infiniteSlider)&&d.changeSlide(a+1,B,z,e,v,t,r,s,j,D,K,g,c,M,G,m,b)}));b.autoSlide&&!O&&(""!=b.autoSlideToggleSelector&&(a(b.autoSlideToggleSelector).css({cursor:"pointer"}),a(b.autoSlideToggleSelector).unbind(X).bind(X,function(){ca?(d.autoSlide(B,z,e,v,t,r,s,j,D,K,g,c,M,G,m,b),ca=!1,a(b.autoSlideToggleSelector).removeClass("on")):(d.autoSlidePause(c),ca=!0,a(b.autoSlideToggleSelector).addClass("on"))})),!ca&&!O&&d.autoSlide(B,z,e,v,t,r,s,j,D,K,g,c,M,G,m,b),L?a(i).bind("touchend.iosSliderEvent", function(){!ca&&!O&&d.autoSlide(B,z,e,v,t,r,s,j,D,K,g,c,M,G,m,b)}):(a(i).bind("mouseenter.iosSliderEvent",function(){d.autoSlidePause(c)}),a(i).bind("mouseleave.iosSliderEvent",function(){!ca&&!O&&d.autoSlide(B,z,e,v,t,r,s,j,D,K,g,c,M,G,m,b)})));a(i).data("iosslider",{obj:Aa,settings:b,scrollerNode:B,slideNodes:z,numberOfSlides:G,centeredSlideOffset:m,sliderNumber:c,originalOffsets:K,childrenOffsets:g,sliderMax:n[c],scrollbarClass:v,scrollbarWidth:t,scrollbarStageWidth:s,stageWidth:r,scrollMargin:j, scrollBorder:D,infiniteSliderOffset:x[c],infiniteSliderWidth:M});F=!1;return!0}ja++;var c=ja,e=[];sa[c]=b;f[c]=0;n[c]=0;var N=[0,0],J=[0,0],w="scrollbarBlock"+ja,v="scrollbar"+ja,I,u,s,t,l,C,m=0,i=a(this),r,p,j,D,y,F=!0,H=-1,g,K=[],R=0,Q=0,aa=0,B=a(this).children(":first-child"),z,na,V,G=a(B).children().not("script").size(),S=!1,fa=0,wa=!1,oa=void 0,M;x[c]=0;var O=!1;la[c]=-1;var ca=!1;ta[c]=!1;var pa,qa=!1,ha=!1,W,X=L?"touchstart.iosSliderEvent":"click.iosSliderEvent",va,ya,ma;ba[c]=!1;ga[c]=[]; b.scrollbarDrag&&(b.scrollbar=!0,b.scrollbarHide=!1);var Aa=a(this);if(void 0!=Aa.data("iosslider"))return!0;a(this).find("img").bind("dragstart.iosSliderEvent",function(a){a.preventDefault()});b.infiniteSlider&&(b.scrollbar=!1);b.scrollbar&&(""!=b.scrollbarContainer?a(b.scrollbarContainer).append("<div class = '"+w+"'><div class = '"+v+"'></div></div>"):a(B).parent().append("<div class = '"+w+"'><div class = '"+v+"'></div></div>"));if(!h())return!0;a(this).find("a").bind("mousedown",d.preventDrag); a(this).find("[onclick]").bind("click",d.preventDrag).each(function(){a(this).data("onclick",this.onclick)});var H=d.calcActiveOffset(b,d.getSliderOffset(a(B),"x"),g,r,x[c],G,void 0,c),H=(H+x[c]+G)%G,da=new d.args(b,B,a(B).children(":eq("+H+")"),H,H,!1);a(i).data("args",da);if(""!=b.onSliderLoaded)b.onSliderLoaded(da);la[c]=H;if(sa[c].responsiveSlides||sa[c].responsiveSlideContainer)H=Ba?"orientationchange":"resize",a(window).bind(H+".iosSliderEvent",function(){if(!h())return!0;var c=a(i).data("args"); if(""!=b.onSliderResize)b.onSliderResize(c)});b.keyboardControls&&!O&&a(document).bind("keydown.iosSliderEvent",function(a){!Y&&!Z&&(a=a.originalEvent);switch(a.keyCode){case 37:a=(E[c]+x[c]+G)%G;(0<a||b.infiniteSlider)&&d.changeSlide(a-1,B,z,e,v,t,r,s,j,D,K,g,c,M,G,m,b);break;case 39:a=(E[c]+x[c]+G)%G,(a<g.length-1||b.infiniteSlider)&&d.changeSlide(a+1,B,z,e,v,t,r,s,j,D,K,g,c,M,G,m,b)}});if(L||b.desktopClickDrag){var da=L?"touchstart.iosSliderEvent":"mousedown.iosSliderEvent",ia=a(B),H=a(B),xa=!1; b.scrollbarDrag&&(ia=ia.add(I),H=H.add(u));a(ia).bind(da,function(k){if(ba[c]||O||(xa=d.isUnselectable(k.target,b)))return!0;pa=a(this)[0]===a(I)[0]?I:B;!Y&&!Z&&(k=k.originalEvent);d.autoSlidePause(c);ma.unbind(".disableClick");L?(eventX=k.touches[0].pageX,eventY=k.touches[0].pageY):(window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),eventX=k.pageX, eventY=k.pageY,wa=!0,oa=B,a(this).css({cursor:ra}));N=[0,0];J=[0,0];T=0;S=!1;for(k=0;k<e.length;k++)clearTimeout(e[k]);k=d.getSliderOffset(B,"x");k>-1*f[c]+m+W?(k=-1*f[c]+m+W,d.setSliderOffset(a("."+v),k),a("."+v).css({width:t-D+"px"})):k<-1*n[c]&&(d.setSliderOffset(a("."+v),s-j-t),a("."+v).css({width:t-D+"px"}));k=a(this)[0]===a(I)[0]?f[c]:0;Q=-1*(d.getSliderOffset(this,"x")-eventX-k);d.getSliderOffset(this,"y");N[1]=eventX;J[1]=eventY;ha=!1});da=L?"touchmove.iosSliderEvent":"mousemove.iosSliderEvent"; a(H).bind(da,function(k){!Y&&!Z&&(k=k.originalEvent);if(ba[c]||O||xa)return!0;var h=0;L||(window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty());if(L)eventX=k.touches[0].pageX,eventY=k.touches[0].pageY;else if(eventX=k.pageX,eventY=k.pageY,!wa||!ka&&("undefined"!=typeof k.webkitMovementX||"undefined"!=typeof k.webkitMovementY)&&0===k.webkitMovementY&& 0===k.webkitMovementX)return!1;N[0]=N[1];N[1]=eventX;T=(N[1]-N[0])/2;J[0]=J[1];J[1]=eventY;$=(J[1]-J[0])/2;if(!S){var e=(E[c]+x[c]+G)%G,e=new d.args(b,B,a(B).children(":eq("+e+")"),e,e,!1);a(i).data("args",e);if(""!=b.onSlideStart)b.onSlideStart(e)}if((3<$||-3>$)&&3>T&&-3<T&&L&&!S)qa=!0;(5<T||-5>T)&&L?(k.preventDefault(),S=!0):L||(S=!0);if(S&&!qa){var e=d.getSliderOffset(B,"x"),l=a(this)[0]===a(u)[0]?f[c]:0,A=a(this)[0]===a(u)[0]?(f[c]-n[c])/(s-j-t):1,q=a(this)[0]===a(u)[0]?b.scrollbarElasticPullResistance: b.elasticPullResistance;L&&(aa!=k.touches.length&&(Q=-1*e+eventX),aa=k.touches.length);if(b.infiniteSlider){if(e<=-1*n[c]){var p=a(B).width();if(e<=-1*ua[c]){var w=-1*K[0];a(z).each(function(b){d.setSliderOffset(a(z)[b],w+m);b<g.length&&(g[b]=-1*w);w+=a(this).outerWidth(!0)});Q-=-1*g[0];f[c]=-1*g[0]+m;n[c]=f[c]+p-r;x[c]=0}else{var C=0,H=d.getSliderOffset(a(z[0]),"x");a(z).each(function(a){d.getSliderOffset(this,"x")<H&&(H=d.getSliderOffset(this,"x"),C=a)});q=f[c]+p;d.setSliderOffset(a(z)[C],q);f[c]= -1*g[1]+m;n[c]=f[c]+p-r;g.splice(0,1);g.splice(g.length,0,-1*q+m);x[c]++}}if(e>=-1*f[c]||0<=e)if(p=a(B).width(),0<=e){w=-1*K[0];a(z).each(function(b){d.setSliderOffset(a(z)[b],w+m);b<g.length&&(g[b]=-1*w);w+=a(this).outerWidth(!0)});Q+=-1*g[0];f[c]=-1*g[0]+m;n[c]=f[c]+p-r;for(x[c]=G;0<-1*g[0]-p+m;){var F=0,I=d.getSliderOffset(a(z[0]),"x");a(z).each(function(a){d.getSliderOffset(this,"x")>I&&(I=d.getSliderOffset(this,"x"),F=a)});q=f[c]-a(z[F]).outerWidth(!0);d.setSliderOffset(a(z)[F],q);g.splice(0, 0,-1*q+m);g.splice(g.length-1,1);f[c]=-1*g[0]+m;n[c]=f[c]+p-r;x[c]--;E[c]++}}else F=0,I=d.getSliderOffset(a(z[0]),"x"),a(z).each(function(a){d.getSliderOffset(this,"x")>I&&(I=d.getSliderOffset(this,"x"),F=a)}),q=f[c]-a(z[F]).outerWidth(!0),d.setSliderOffset(a(z)[F],q),g.splice(0,0,-1*q+m),g.splice(g.length-1,1),f[c]=-1*g[0]+m,n[c]=f[c]+p-r,x[c]--}else p=a(B).width(),e>-1*f[c]+m&&(h=-1*(f[c]+-1*(Q-l-eventX+m)*A-l)*q/A),e<-1*n[c]&&(h=-1*(n[c]+-1*(Q-l-eventX)*A-l)*q/A);d.setSliderOffset(B,-1*(Q-l-eventX- h)*A-l);b.scrollbar&&(d.showScrollbar(b,v),P=Math.floor((Q-eventX-h-f[c]+m)/(n[c]-f[c])*(s-j-t)*A),l=t,e>=-1*f[c]+m+p?(l=t-D- -1*P,d.setSliderOffset(a("."+v),0),a("."+v).css({width:l+"px"})):e<=-1*n[c]+1?(l=s-j-D-P,d.setSliderOffset(a("."+v),P),a("."+v).css({width:l+"px"})):d.setSliderOffset(a("."+v),P));L&&(y=k.touches[0].pageX);k=!1;h=d.calcActiveOffset(b,-1*(Q-eventX-h),g,r,x[c],G,void 0,c);p=(h+x[c]+G)%G;b.infiniteSlider?p!=U[c]&&(k=!0):h!=E[c]&&(k=!0);if(k&&(k=U[c],E[c]=h,U[c]=p,ha=!0,e=new d.args(b, B,a(B).children(":eq("+p+")"),k,p,!0),a(i).data("args",e),""!=b.onSlideChange))b.onSlideChange(e)}});a(ia).bind("touchend.iosSliderEvent",function(a){a=a.originalEvent;if(ba[c]||O||xa)return!0;if(0!=a.touches.length)for(var h=0;h<a.touches.length;h++)a.touches[h].pageX==y&&d.slowScrollHorizontal(B,z,e,v,T,$,t,r,s,j,D,K,g,c,M,G,pa,ha,m,b);else d.slowScrollHorizontal(B,z,e,v,T,$,t,r,s,j,D,K,g,c,M,G,pa,ha,m,b);qa=!1});if(!L){H=a(window);if(Z||Y)H=a(document);a(H).bind("mouseup.iosSliderEvent"+c,function(){S? va.unbind("click.disableClick").bind("click.disableClick",d.preventClick):va.unbind("click.disableClick").bind("click.disableClick",d.enableClick);ya.each(function(){this.onclick=function(b){if(S)return!1;a(this).data("onclick").call(this,b||window.event)}});1.8<=parseFloat(a().jquery)?ma.each(function(){var b=a._data(this,"events");if(void 0!=b&&void 0!=b.click&&"iosSliderEvent"!=b.click[0].namespace){if(!S)return!1;a(this).one("click.disableClick",d.preventClick);var b=a._data(this,"events").click, c=b.pop();b.splice(0,0,c)}}):1.6<=parseFloat(a().jquery)&&ma.each(function(){var b=a(this).data("events");if(void 0!=b&&void 0!=b.click&&"iosSliderEvent"!=b.click[0].namespace){if(!S)return!1;a(this).one("click.disableClick",d.preventClick);var b=a(this).data("events").click,c=b.pop();b.splice(0,0,c)}});if(!ta[c]){if(O)return!0;a(ia).css({cursor:ea});wa=!1;if(void 0==oa)return!1;d.slowScrollHorizontal(oa,z,e,v,T,$,t,r,s,j,D,K,g,c,M,G,pa,ha,m,b);oa=void 0}qa=!1})}}})},destroy:function(h,e){void 0== e&&(e=this);return a(e).each(function(){var b=a(this),e=b.data("iosslider");if(void 0==e)return!1;void 0==h&&(h=!0);d.autoSlidePause(e.sliderNumber);ta[e.sliderNumber]=!0;a(window).unbind(".iosSliderEvent-"+e.sliderNumber);a(document).unbind(".iosSliderEvent-"+e.sliderNumber);a(this).unbind(".iosSliderEvent");a(this).children(":first-child").unbind(".iosSliderEvent");a(this).children(":first-child").children().unbind(".iosSliderEvent");h&&(a(this).attr("style",""),a(this).children(":first-child").attr("style", ""),a(this).children(":first-child").children().attr("style",""),a(e.settings.navSlideSelector).attr("style",""),a(e.settings.navPrevSelector).attr("style",""),a(e.settings.navNextSelector).attr("style",""),a(e.settings.autoSlideToggleSelector).attr("style",""),a(e.settings.unselectableSelector).attr("style",""));e.settings.scrollbar&&a(".scrollbarBlock"+e.sliderNumber).remove();for(var e=ga[e.sliderNumber],c=0;c<e.length;c++)clearTimeout(e[c]);b.removeData("iosslider")})},update:function(h){void 0== h&&(h=this);return a(h).each(function(){var e=a(this),b=e.data("iosslider");if(void 0==b)return!1;R.destroy(!1,this);b.settings.startAtSlide=e.data("args").currentSlideNumber;1!=b.numberOfSlides&&b.settings.infiniteSlider&&(b.settings.startAtSlide=(E[b.sliderNumber]+1+x[b.sliderNumber]+b.numberOfSlides)%b.numberOfSlides);R.init(b.settings,this);e=new d.args(b.settings,b.scrollerNode,a(b.scrollerNode).children(":eq("+(b.settings.startAtSlide-1)+")"),b.settings.startAtSlide-1,b.settings.startAtSlide- 1,!1);a(b.stageNode).data("args",e);if(""!=b.settings.onSliderUpdate)b.settings.onSliderUpdate(e)})},addSlide:function(d,e){return this.each(function(){var b=a(this).data("iosslider");if(void 0==b)return!1;b.settings.infiniteSlider?a(b.scrollerNode).children(":eq("+(e-2)+")").after(d):(e<=b.numberOfSlides?a(b.scrollerNode).children(":eq("+(e-1)+")").before(d):a(b.scrollerNode).children(":eq("+(e-2)+")").after(d),E[b.sliderNumber]>e-2&&E[b.sliderNumber]++);R.update(this)})},removeSlide:function(d){return this.each(function(){var e= a(this).data("iosslider");if(void 0==e)return!1;a(e.scrollerNode).children(":eq("+(d-1)+")").remove();E[e.sliderNumber]>d-1&&E[e.sliderNumber]--;R.update(this)})},goToSlide:function(h,e){void 0==e&&(e=this);return a(e).each(function(){var b=a(this).data("iosslider");if(void 0==b)return!1;h=h>b.childrenOffsets.length?b.childrenOffsets.length-1:h-1;d.changeSlide(h,a(b.scrollerNode),a(b.slideNodes),ga[b.sliderNumber],b.scrollbarClass,b.scrollbarWidth,b.stageWidth,b.scrollbarStageWidth,b.scrollMargin, b.scrollBorder,b.originalOffsets,b.childrenOffsets,b.sliderNumber,b.infiniteSliderWidth,b.numberOfSlides,b.centeredSlideOffset,b.settings);E[b.sliderNumber]=h})},lock:function(){return this.each(function(){var d=a(this).data("iosslider");if(void 0==d)return!1;ba[d.sliderNumber]=!0})},unlock:function(){return this.each(function(){var d=a(this).data("iosslider");if(void 0==d)return!1;ba[d.sliderNumber]=!1})},getData:function(){return this.each(function(){var d=a(this).data("iosslider");return void 0== d?!1:d})}};a.fn.iosSlider=function(d){if(R[d])return R[d].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof d||!d)return R.init.apply(this,arguments);a.error("invalid method call!")}})(jQuery);